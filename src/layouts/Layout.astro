---
interface Props {
  title: string;
  description: string;
  canonical?: string;
}

const { title, description, canonical } = Astro.props;

---

<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content={description}>
  <meta name="robots" content="index, follow">
  
  <title>{title}</title>
  
  {canonical && <link rel="canonical" href={canonical} />}
  
  <!-- Open Graph -->
  <meta property="og:title" content={title}>
  <meta property="og:description" content={description}>
  <meta property="og:type" content="website">
  <meta property="og:locale" content="pl_PL">
  <meta property="og:site_name" content="Art Kuchnie Toru≈Ñ">
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  
  <!-- Preconnect -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://www.googletagmanager.com">
  
  <!-- Google Consent Mode v2 - MUST be first -->
  <script is:inline>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    
    gtag('consent', 'default', {
      'ad_storage': 'denied',
      'ad_user_data': 'denied',
      'ad_personalization': 'denied',
      'analytics_storage': 'denied',
      'functionality_storage': 'granted',
      'personalization_storage': 'denied',
      'security_storage': 'granted',
      'wait_for_update': 500
    });
    
    const savedConsent = localStorage.getItem('cookie_consent');
    if (savedConsent) {
      try {
        const consent = JSON.parse(savedConsent);
        gtag('consent', 'update', {
          'ad_storage': consent.marketing ? 'granted' : 'denied',
          'ad_user_data': consent.marketing ? 'granted' : 'denied',
          'ad_personalization': consent.marketing ? 'granted' : 'denied',
          'analytics_storage': consent.analytics ? 'granted' : 'denied',
          'personalization_storage': consent.marketing ? 'granted' : 'denied'
        });
      } catch(e) {}
    }
  </script>
  
  <!-- Google Tag Manager -->
  <script is:inline>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-NFZ8NFCS');</script>
  <!-- End Google Tag Manager -->
  
  <style is:global>
    @import '../styles/global.css';
  </style>
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NFZ8NFCS"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="header__inner">
        <a href="/" class="logo">
          <div class="logo__icon">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path d="M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Zm0 0V6a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v3M9 13h6"/>
            </svg>
          </div>
          <div class="logo__text">
            <span class="logo__name">Art Kuchnie</span>
            <span class="logo__claim">Kuchnie na wymiar ‚Ä¢ Toru≈Ñ</span>
          </div>
        </a>
        
        <nav class="nav">
          <ul class="nav__list">
            <li><a href="/" class="nav__link">Strona g≈Ç√≥wna</a></li>
            <li class="nav__dropdown">
              <a href="#" class="nav__link">Rodzaje kuchni ‚ñæ</a>
              <ul class="nav__dropdown-menu">
                <li><a href="/kuchnie/plyta-laminowana/" class="nav__dropdown-link">Kuchnie z p≈Çyty laminowanej</a></li>
                <li><a href="/kuchnie/mdf-lakierowany/" class="nav__dropdown-link">Kuchnie MDF lakierowany</a></li>
                <li><a href="/kuchnie/akrylowe/" class="nav__dropdown-link">Kuchnie akrylowe</a></li>
                <li><a href="/kuchnie/akryl-lakier-plyta/" class="nav__dropdown-link">Kuchnie akryl/lakier + p≈Çyta</a></li>
                <li><a href="/kuchnie/fornir/" class="nav__dropdown-link">Kuchnie z fornirem</a></li>
                <li><a href="/kuchnie/blaty-hpl/" class="nav__dropdown-link">Kuchnie z blatami HPL</a></li>
              </ul>
            </li>
            <li><a href="/realizacje/" class="nav__link">Realizacje</a></li>
            <li><a href="/kontakt/" class="nav__link">Kontakt</a></li>
          </ul>
          
          <a href="tel:+48576376567" class="btn btn--primary">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
              <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
            </svg>
            576 376 567
          </a>
          
          <button class="mobile-toggle" aria-label="Menu">
            <span></span>
            <span></span>
            <span></span>
          </button>
        </nav>
      </div>
    </div>
  </header>

  <main>
    <slot />
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer__grid">
        <div class="footer__brand">
          <a href="/" class="footer__logo">
            <div class="footer__logo-icon">
              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Zm0 0V6a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v3M9 13h6"/>
              </svg>
            </div>
            <div class="footer__logo-text">
              <span class="footer__logo-name">Art Kuchnie</span>
              <span class="footer__logo-claim">Kuchnie na wymiar ‚Ä¢ Toru≈Ñ</span>
            </div>
          </a>
          <p class="footer__desc">
            Projektujemy, produkujemy i montujemy kuchnie na wymiar w Toruniu. 
            Ponad 10 lat do≈õwiadczenia i setki zadowolonych klient√≥w. Jeste≈õmy czƒô≈õciƒÖ grupy <a href="https://www.meblesystem">Meble System</a>
          </p>
        </div>
        
        <div>
          <h4 class="footer__heading">Rodzaje kuchni</h4>
          <ul class="footer__list">
            <li><a href="/kuchnie/plyta-laminowana/">P≈Çyta laminowana</a></li>
            <li><a href="/kuchnie/mdf-lakierowany/">MDF lakierowany</a></li>
            <li><a href="/kuchnie/akrylowe/">Kuchnie akrylowe</a></li>
            <li><a href="/kuchnie/akryl-lakier-plyta/">Akryl/lakier + p≈Çyta</a></li>
            <li><a href="/kuchnie/fornir/">Kuchnie z fornirem</a></li>
            <li><a href="/kuchnie/blaty-hpl/">Blaty HPL</a></li>
          </ul>
        </div>
        
        <div>
          <h4 class="footer__heading">Informacje</h4>
          <ul class="footer__list">
            <li><a href="/">O nas</a></li>
            <li><a href="/realizacje/">Realizacje</a></li>
            <li><a href="/kontakt/">Kontakt</a></li>
            <li><a href="/polityka-prywatnosci/">Polityka prywatno≈õci</a></li>
            <li><a href="#" class="footer__cookie-link" id="openCookieSettings">Ustawienia cookies</a></li>
          </ul>
        </div>
        
        <div>
          <h4 class="footer__heading">Kontakt</h4>
          <div class="footer__contact-item">
            <svg viewBox="0 0 24 24"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/></svg>
            <a href="tel:+48576376567">576 376 567</a>
          </div>
          <div class="footer__contact-item">
            <svg viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"/></svg>
            <a href="mailto:kontakt@artkuchnie.pl">kontakt@artkuchnie.pl</a>
          </div>
          <div class="footer__contact-item">
            <svg viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
            <span>ul. Polna 134, hala nr 3<br>87-100 Toru≈Ñ</span>
          </div>
        </div>
      </div>
      
      <div class="footer__bottom">
        <p>&copy; 2025 Art Kuchnie Toru≈Ñ. Wszelkie prawa zastrze≈ºone. Realizacja: <a href="https://www.torweb.pl">TorWeb.pl</a></p>
        <div class="footer__legal">
          <a href="/polityka-prywatnosci/">Polityka prywatno≈õci</a>
          <span>‚Ä¢</span>
          <a href="#" id="openCookieSettingsBottom">Cookies</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Cookie Banner -->
  <div class="cookie-banner" id="cookieBanner" role="dialog" aria-modal="true" aria-labelledby="cookieTitle">
    <div class="cookie-banner__content">
      <div class="cookie-banner__text">
        <h3 id="cookieTitle">üç™ Ta strona u≈ºywa plik√≥w cookies</h3>
        <p>
          U≈ºywamy cookies, aby zapewniƒá prawid≈Çowe dzia≈Çanie strony oraz analizowaƒá ruch. 
          Mo≈ºesz zaakceptowaƒá wszystkie cookies lub dostosowaƒá ustawienia.
          <a href="/polityka-prywatnosci/">Polityka prywatno≈õci</a>
        </p>
      </div>
      <div class="cookie-banner__actions">
        <button class="cookie-btn cookie-btn--outline" id="cookieSettings">Ustawienia</button>
        <button class="cookie-btn cookie-btn--secondary" id="cookieReject">Tylko niezbƒôdne</button>
        <button class="cookie-btn cookie-btn--primary" id="cookieAccept">Akceptujƒô wszystkie</button>
      </div>
    </div>
  </div>

  <!-- Cookie Settings Modal -->
  <div class="cookie-modal" id="cookieModal" role="dialog" aria-modal="true" aria-labelledby="cookieModalTitle">
    <div class="cookie-modal__overlay" id="cookieModalOverlay"></div>
    <div class="cookie-modal__content">
      <div class="cookie-modal__header">
        <h3 id="cookieModalTitle">Ustawienia plik√≥w cookies</h3>
        <button class="cookie-modal__close" id="cookieModalCloseBtn" aria-label="Zamknij">
          <svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </div>
      
      <div class="cookie-modal__body">
        <div class="cookie-category">
          <div class="cookie-category__header">
            <div class="cookie-category__info">
              <h4>Niezbƒôdne</h4>
              <p>Wymagane do prawid≈Çowego dzia≈Çania strony. Nie mo≈ºna ich wy≈ÇƒÖczyƒá.</p>
            </div>
            <div class="cookie-toggle cookie-toggle--disabled">
              <input type="checkbox" checked disabled id="cookieNecessary">
              <label for="cookieNecessary"></label>
            </div>
          </div>
        </div>
        
        <div class="cookie-category">
          <div class="cookie-category__header">
            <div class="cookie-category__info">
              <h4>Analityczne</h4>
              <p>PomagajƒÖ nam zrozumieƒá, jak u≈ºytkownicy korzystajƒÖ ze strony (Google Analytics).</p>
            </div>
            <div class="cookie-toggle">
              <input type="checkbox" id="cookieAnalytics">
              <label for="cookieAnalytics"></label>
            </div>
          </div>
        </div>
        
        <div class="cookie-category">
          <div class="cookie-category__header">
            <div class="cookie-category__info">
              <h4>Marketingowe</h4>
              <p>S≈Çu≈ºƒÖ do personalizacji reklam i ≈õledzenia skuteczno≈õci kampanii.</p>
            </div>
            <div class="cookie-toggle">
              <input type="checkbox" id="cookieMarketing">
              <label for="cookieMarketing"></label>
            </div>
          </div>
        </div>
      </div>
      
      <div class="cookie-modal__footer">
        <button class="cookie-btn cookie-btn--outline" id="cookieRejectAll">Odrzuƒá opcjonalne</button>
        <button class="cookie-btn cookie-btn--primary" id="cookieSaveSettings">Zapisz ustawienia</button>
      </div>
    </div>
  </div>
  
  <script>
    // Mobile menu toggle
    const toggle = document.querySelector('.mobile-toggle');
    const navList = document.querySelector('.nav__list');
    
    toggle?.addEventListener('click', () => {
      navList?.classList.toggle('active');
    });
    
    // Cookie Consent Management
    const cookieBanner = document.getElementById('cookieBanner');
    const cookieModal = document.getElementById('cookieModal');
    const analyticsCheckbox = document.getElementById('cookieAnalytics') as HTMLInputElement;
    const marketingCheckbox = document.getElementById('cookieMarketing') as HTMLInputElement;
    
    // Check if consent already given
    const savedConsent = localStorage.getItem('cookie_consent');
    
    if (!savedConsent) {
      // Show banner after short delay
      setTimeout(() => {
        cookieBanner?.classList.add('active');
      }, 1000);
    } else {
      // Load saved preferences into checkboxes
      try {
        const consent = JSON.parse(savedConsent);
        if (analyticsCheckbox) analyticsCheckbox.checked = consent.analytics;
        if (marketingCheckbox) marketingCheckbox.checked = consent.marketing;
      } catch(e) {}
    }
    
    function updateConsent(analytics: boolean, marketing: boolean) {
      // Save to localStorage
      const consent = {
        analytics,
        marketing,
        timestamp: new Date().toISOString()
      };
      localStorage.setItem('cookie_consent', JSON.stringify(consent));
      
      // Update Google Consent Mode
      gtag('consent', 'update', {
        'ad_storage': marketing ? 'granted' : 'denied',
        'ad_user_data': marketing ? 'granted' : 'denied',
        'ad_personalization': marketing ? 'granted' : 'denied',
        'analytics_storage': analytics ? 'granted' : 'denied',
        'personalization_storage': marketing ? 'granted' : 'denied'
      });
      
      // Hide banner and modal
      cookieBanner?.classList.remove('active');
      cookieModal?.classList.remove('active');
      
      // Update checkboxes
      if (analyticsCheckbox) analyticsCheckbox.checked = analytics;
      if (marketingCheckbox) marketingCheckbox.checked = marketing;
    }
    
    function openModal() {
      cookieModal?.classList.add('active');
      cookieBanner?.classList.remove('active');
    }
    
    function closeModal() {
      cookieModal?.classList.remove('active');
      // Show banner again if no consent saved
      if (!localStorage.getItem('cookie_consent')) {
        cookieBanner?.classList.add('active');
      }
    }
    
    // Event listeners
    document.getElementById('cookieAccept')?.addEventListener('click', () => {
      updateConsent(true, true);
    });
    
    document.getElementById('cookieReject')?.addEventListener('click', () => {
      updateConsent(false, false);
    });
    
    document.getElementById('cookieSettings')?.addEventListener('click', openModal);
    
    document.getElementById('cookieModalOverlay')?.addEventListener('click', closeModal);
    document.getElementById('cookieModalCloseBtn')?.addEventListener('click', closeModal);
    
    document.getElementById('cookieRejectAll')?.addEventListener('click', () => {
      updateConsent(false, false);
    });
    
    document.getElementById('cookieSaveSettings')?.addEventListener('click', () => {
      updateConsent(
        analyticsCheckbox?.checked || false,
        marketingCheckbox?.checked || false
      );
    });
    
    // Footer links to open cookie settings
    document.getElementById('openCookieSettings')?.addEventListener('click', (e) => {
      e.preventDefault();
      openModal();
    });
    
    document.getElementById('openCookieSettingsBottom')?.addEventListener('click', (e) => {
      e.preventDefault();
      openModal();
    });
  </script>
</body>
</html>

<style is:global>
  /* Cookie Banner */
  .cookie-banner {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: #fff;
    box-shadow: 0 -4px 20px rgba(0,0,0,0.15);
    z-index: 9999;
    padding: 1.5rem;
    transform: translateY(100%);
    transition: transform 0.3s ease;
  }
  
  .cookie-banner.active {
    transform: translateY(0);
  }
  
  .cookie-banner__content {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 1.5rem;
  }
  
  .cookie-banner__text {
    flex: 1;
    min-width: 300px;
  }
  
  .cookie-banner__text h3 {
    margin: 0 0 0.5rem;
    font-size: 1.125rem;
    color: #1a1a1a;
  }
  
  .cookie-banner__text p {
    margin: 0;
    font-size: 0.9375rem;
    color: #666;
    line-height: 1.5;
  }
  
  .cookie-banner__text a {
    color: var(--color-accent, #b8860b);
    text-decoration: underline;
  }
  
  .cookie-banner__actions {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
  }
  
  /* Cookie Buttons */
  .cookie-btn {
    padding: 0.75rem 1.5rem;
    border-radius: 8px;
    font-size: 0.9375rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    border: none;
    font-family: inherit;
    white-space: nowrap;
  }
  
  .cookie-btn--primary {
    background: var(--color-accent, #b8860b);
    color: #fff;
  }
  
  .cookie-btn--primary:hover {
    background: #9a7209;
  }
  
  .cookie-btn--secondary {
    background: #f5f5f5;
    color: #1a1a1a;
  }
  
  .cookie-btn--secondary:hover {
    background: #e8e8e8;
  }
  
  .cookie-btn--outline {
    background: transparent;
    border: 1px solid #ddd;
    color: #1a1a1a;
  }
  
  .cookie-btn--outline:hover {
    border-color: var(--color-accent, #b8860b);
    color: var(--color-accent, #b8860b);
  }
  
  /* Cookie Modal */
  .cookie-modal {
    position: fixed;
    inset: 0;
    z-index: 10000;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 1rem;
  }
  
  .cookie-modal.active {
    display: flex;
  }
  
  .cookie-modal__overlay {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.5);
  }
  
  .cookie-modal__content {
    position: relative;
    background: #fff;
    border-radius: 16px;
    max-width: 560px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
  }
  
  .cookie-modal__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.5rem;
    border-bottom: 1px solid #eee;
  }
  
  .cookie-modal__header h3 {
    margin: 0;
    font-size: 1.25rem;
  }
  
  .cookie-modal__close {
    width: 40px;
    height: 40px;
    border: none;
    background: #f5f5f5;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s;
  }
  
  .cookie-modal__close:hover {
    background: #e8e8e8;
  }
  
  .cookie-modal__close svg {
    width: 20px;
    height: 20px;
    fill: #666;
  }
  
  .cookie-modal__body {
    padding: 1.5rem;
  }
  
  .cookie-category {
    padding: 1rem 0;
    border-bottom: 1px solid #eee;
  }
  
  .cookie-category:last-child {
    border-bottom: none;
  }
  
  .cookie-category__header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 1rem;
  }
  
  .cookie-category__info h4 {
    margin: 0 0 0.25rem;
    font-size: 1rem;
  }
  
  .cookie-category__info p {
    margin: 0;
    font-size: 0.875rem;
    color: #666;
    line-height: 1.4;
  }
  
  /* Toggle Switch */
  .cookie-toggle {
    flex-shrink: 0;
  }
  
  .cookie-toggle input {
    display: none;
  }
  
  .cookie-toggle label {
    display: block;
    width: 52px;
    height: 28px;
    background: #ddd;
    border-radius: 14px;
    position: relative;
    cursor: pointer;
    transition: background 0.2s;
  }
  
  .cookie-toggle label::after {
    content: '';
    position: absolute;
    width: 22px;
    height: 22px;
    background: #fff;
    border-radius: 50%;
    top: 3px;
    left: 3px;
    transition: transform 0.2s;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  }
  
  .cookie-toggle input:checked + label {
    background: var(--color-accent, #b8860b);
  }
  
  .cookie-toggle input:checked + label::after {
    transform: translateX(24px);
  }
  
  .cookie-toggle--disabled label {
    background: #b8860b;
    opacity: 0.6;
    cursor: not-allowed;
  }
  
  .cookie-modal__footer {
    display: flex;
    justify-content: flex-end;
    gap: 0.75rem;
    padding: 1.5rem;
    border-top: 1px solid #eee;
    flex-wrap: wrap;
  }
  
  /* Footer updates */
  .footer__legal {
    display: flex;
    gap: 0.5rem;
    align-items: center;
  }
  
  .footer__legal span {
    color: #666;
  }
  
  @media (max-width: 640px) {
    .cookie-banner__content {
      flex-direction: column;
      align-items: stretch;
    }
    
    .cookie-banner__actions {
      flex-direction: column;
    }
    
    .cookie-btn {
      width: 100%;
      text-align: center;
    }
    
    .cookie-modal__footer {
      flex-direction: column;
    }
  }
</style>